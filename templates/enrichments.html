{# enrichments.html #}

{% extends "base.html" %}

{% block styles %}
{{ block.super }}
<style type="text/css">
.carousel {
  width:100%;
  /*float:left;*/
  position:relative;  /* On older OS versions "position" and "z-index" must be defined, */
  z-index:1;      /* it seems that recent webkit is less picky and works anyway. */
  overflow:hidden;
}
.carousel .carousel-scroller {
  float:left;
  padding:0;
}
.carousel .carousel-scroller ul {
  list-style:none;
  display:block;
  float:left;
  width:100%;
  height:100%;
  padding:0;
  margin:0;
  text-align:left;
}
.carousel .carousel-scroller li {
  display:block; float:left;
}
.carousel .carousel-scroller .carousel-rows {
  display: none;
}
#category-selector li, #subcategory-selector li, #enrichment-selector li {
  text-align:center;
  padding: 10px;
  margin: 0 5px;
  background:#aaa;
}
#enrichment-selector li {
  display: inline-block;
  list-style: none;
  margin: 5px;
}
#category-selector, #subcategory-selector, #enrichment-selector {
  margin: 10px;
  right: 10px;
}

</style>
{% endblock styles %}

{% block body %}
<div id="enrichment-container">
  <div class="carousel" id="category-selector">
    <div class="carousel-scroller">
      <ul>
        <li>Category</li>
        <li>Category</li>
        <li>Category</li>
        <li>Category</li>
        <li>Category</li>
        <li>Category</li>
        <li>Category</li>
        <li>Category</li>
        <li>Category</li>
        <li>Category</li>
        <li>Category</li>
        <li>Category</li>
        <li>Category</li>
        <li>Category</li>
        <li>Category</li>
        <li>Category</li>
        <li>Category</li>
        <li>Category</li>
        <li>Category</li>
        <li>Category</li>
        <li>Category</li>
        <li>Category</li>
      </ul>
    </div>
  </div>
  <div class="carousel" id="subcategory-selector">
    <div class="carousel-scroller">
      <ul>
        <li>Sub Category</li>
        <li>Sub Category</li>
        <li>Sub Category</li>
        <li>Sub Category</li>
        <li>Sub Category</li>
        <li>Sub Category</li>
        <li>Sub Category</li>
        <li>Sub Category</li>
        <li>Sub Category</li>
        <li>Sub Category</li>
        <li>Sub Category</li>
        <li>Sub Category</li>
        <li>Sub Category</li>
        <li>Sub Category</li>
        <li>Sub Category</li>
        <li>Sub Category</li>
        <li>Sub Category</li>
        <li>Sub Category</li>
        <li>Sub Category</li>
        <li>Sub Category</li>
        <li>Sub Category</li>
        <li>Sub Category</li>
        <li>Sub Category</li>
        <li>Sub Category</li>
        <li>Sub Category</li>
      </ul>
    </div>
  </div>
  <div class="carousel" id="enrichment-selector">
    <div class="carousel-scroller">
      <div class="carousel-rows">3</div>
      <ul>
        <li>Enrichment</li>
        <li>Enrichment</li>
        <li>Enrichment</li>
        <li>Enrichment</li>
        <li>Enrichment</li>
        <li>Enrichment</li>
        <li>Enrichment</li>
        <li>Enrichment</li>
        <li>Enrichment</li>
        <li>Enrichment</li>
        <li>Enrichment</li>
        <li>Enrichment</li>
        <li>Enrichment</li>
        <li>Enrichment</li>
        <li>Enrichment</li>
        <li>Enrichment</li>
        <li>Enrichment</li>
        <li>Enrichment</li>
        <li>Enrichment</li>
        <li>Enrichment</li>
        <li>Enrichment</li>
        <li>Enrichment</li>
        <li>Enrichment</li>
        <li>Enrichment</li>
        <li>Enrichment</li>
        <li>Enrichment</li>
        <li>Enrichment</li>
        <li>Enrichment</li>
        <li>Enrichment</li>
        <li>Enrichment</li>
        <li>Enrichment</li>
        <li>Enrichment</li>
        <li>Enrichment</li>
        <li>Enrichment</li>
        <li>Enrichment</li>
        <li>Enrichment</li>
        <li>Enrichment</li>
        <li>Enrichment</li>
        <li>Enrichment</li>
        <li>Enrichment</li>
        <li>Enrichment</li>
        <li>Enrichment</li>
        <li>Enrichment</li>
        <li>Enrichment</li>
      </ul>
  </div>
  </div>
</div>
{% endblock %}

{% block scripts %}
{% load coffeescript %}
{{ block.super }}
<script src="{{ STATIC_URL }}js/jquery-1.7.2.min.js"></script>
<script src="{{ STATIC_URL }}js/iscroll.js"></script>
<script type="text/javascript">
  {% inlinecoffeescript %}
  $(document).ready ->
    resizeCarousel = (scroller, numRows=1) ->
      $(scroller).width Math.ceil($(scroller).find('ul li').length/numRows)*$(scroller).find('ul li:first').outerWidth(true)
    resizeAllCarousels = ->
      $('.carousel-scroller').each ->
        rows = $(this).children('.carousel-rows').text()
        if (rows)
          resizeCarousel this, rows
        else
          resizeCarousel this
    resizeAllCarousels()
    $(window).resize ->
      resizeAllCarousels()
    window.categoryScroll = new iScroll 'category-selector', {
        vScroll: false
        momentum: true
        bounce: true
        hScrollbar: false
      }
    window.subcategoryScroll = new iScroll 'subcategory-selector', {
        vScroll: false
        momentum: true
        bounce: true
        hScrollbar: false
      }
    window.enrichmentScroll = new iScroll 'enrichment-selector', {
        vScroll: false
        momentum: true
        bounce: true
        hScrollbar: false
      }
  {% endinlinecoffeescript %}
</script>
{% endblock scripts %}